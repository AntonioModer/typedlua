\documentclass{beamer}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usecolortheme{dove}

\begin{document}

\title{Typed Lua}
\subtitle{Google Summer of Code Proposal}
\author{Andr√© Murbach Maidl}
\institute[PUC-Rio]{LabLua\\PUC-Rio}
\date{}

\frame{\titlepage}

\section{Static Typing X Dynamic Typing}
\begin{frame}
\frametitle{Static Typing X Dynamic Typing}
\begin{itemize}
\item Static Typing
\begin{itemize}
\item Better documentation
\item Error detection at compile time
\item More efficient program execution
\end{itemize}
\item Dynamic Typing
\begin{itemize}
\item Faster adaptation to changing requirements
\item Quicker development
\end{itemize}
\end{itemize}
\end{frame}

\subsection{Multiple languages to build large softwares}
\begin{frame}
\frametitle{Multiple languages to build large softwares}
\begin{itemize}
\item Prototype using a dynamically typed language
\item Rewrite it in a statically typed language
\end{itemize}
\end{frame}

\section{Gradual Typing}
\begin{frame}
\frametitle{Gradual Typing}
\begin{itemize}
\item The choice between static and dynamic typing in the same language
\item Use type annotations where static typing is needed
\item Avoid type annotations where dynamic typing is sufficient
\item No rewriting after prototyping phase
\item The programmer can gradually migrate to static typing
\begin{itemize}
\item Specially in module boundaries
\end{itemize}
\end{itemize}
\end{frame}

\subsection{Gradual Typing and Dynamically Typed Languages}
\begin{frame}
\frametitle{Gradual Typing and Dynamically Typed Languages}
\begin{itemize}
\item Dart and TypeScript
\begin{itemize}
\item New languages derived from JavaScript
\item Both target JavaScript
\item Both are designed with a gradual typing system
\end{itemize}
\item Typed Scheme, Typed Racket, core.typed, and StrongRuby
\begin{itemize}
\item Gradual typing extensions to Scheme, Racket, Clojure, and Ruby
\end{itemize}
\item Perl 6
\begin{itemize}
\item Not compatible with Perl 5
\end{itemize}
\item Python
\begin{itemize}
\item gradual (package)
\item Run-time type checking semantics of gradual typing
\item Works only on Python 3
\end{itemize}
\end{itemize}
\end{frame}

\section{Typed Lua}
\begin{frame}
\frametitle{Typed Lua}
\begin{itemize}
\item A proposal to design a gradual type system for Lua
\begin{itemize}
\item Should be simple enough to preserve existent Lua idioms
\end{itemize}
\item A superset of Lua
\begin{itemize}
\item Type annotations
\item Compile-time type checking
\item Classes
\item Interfaces
\item Modules
\end{itemize}
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Typed Lua}
\begin{itemize}
\item Lua X OO programming and modules
\begin{itemize}
\item It is possible to write OO code in Lua
\item It is possible to split Lua code into modules
\item Does not set policies on how these features should behave
\item Due to its use as an embedded and extension language
\end{itemize}
\item Typed Lua intended use is as an application language
\item So the policies for OO and modules should be part of the language
\item The gradual type system should also enforce these policies
\end{itemize}
\end{frame}

\subsection{Related Work}
\begin{frame}
\frametitle{Related Work}
\begin{itemize}
\item Some Lua projects implement parts of what is being proposed
\item However, none of them implement type checking along with OO programming
\item LuaInspect
\begin{itemize}
\item A tool that performs code analysis
\item For instance, flagging undeclared identifiers
\item It does not try to analyze OO code
\item It does not perform type checking
\end{itemize}
\item MetaLua and MoonScript
\begin{itemize}
\item Both support some sort of OO programming
\item However, both of them do not perform compile-time type checking
\end{itemize}
\item Tidal Lock
\begin{itemize}
\item A prototype of a gradual type system for Lua
\item It is not typing the common OO idioms used by Lua programmers
\end{itemize}
\end{itemize}
\end{frame}

\subsection{Some Statistics}
\begin{frame}
\frametitle{Some Statistics}
\begin{itemize}
\item Data from LuaRocks as of June 10th
\item 2950 .lua files
\item \textbf{luac} (version 5.2.2) compiles 2864 of the 2950 files
\item We have 2069 files when we ignore files that are generated by
MoonScript and documentation and test subdirectories
\item 18864 functions are being declared
\begin{itemize}
\item 4127 (21.9\%) are actually methods
\item 1586 (8.4\%) use \textbf{type} to inspect the tags of the arguments
\item 771 (4.1\%) return \textbf{nil} plus something else
\item 119 (0.6\%) return \textbf{false} plus something else
\item 549 (2.9\%) use \textbf{setmetatable}
\item 175 (0.9\%) use \textbf{getmetatable}
\end{itemize}
\item The table constructor is used 19049 times
\begin{itemize}
\item 4571 (24.00\%) times is the empty construct
\item 14475 (75.99\%) times is a constructor with only static keys
\item 3 (0.01\%) times is a constructor with only dynamic keys
\item There is no constructor with static and dynamic keys
\end{itemize}
\end{itemize}
\end{frame}

\subsection{Conclusions}
\begin{frame}
\frametitle{Conclusions}
\begin{itemize}
\item We expect to deliver a tool that helps Lua community
\begin{itemize}
\item Allowing better documentation through a gradual type system
\item Enabling the definition of structured types using interfaces and classes
\item Offering compile-time type checking with OO programming style
\item Further integrate Typed Lua to text editors and IDEs
\item Allowing autocompletion and flagging type errors
\end{itemize}
\item Typed Lua will compile to Lua preserving existent idioms
\end{itemize}
\end{frame}

\end{document}
